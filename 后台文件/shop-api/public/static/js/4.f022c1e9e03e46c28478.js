webpackJsonp([4],{VHQP:function(e,t){},dIYS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Xxa5"),o=i.n(a),r=i("exGp"),n=i.n(r),s=i("Dd8w"),l=i.n(s),f=i("dKdo"),c=i("NYxO"),m={data:function(){return{forminfo:{pid:"",catename:"",img:"",status:1},dialogImageUrl:"",dialogVisible:!1,fileList:[],rules:{pid:[{required:!0,message:"请选择上级分类",trigger:"blur"}],catename:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},computed:l()({},Object(c.c)({catelist:"category/catelist"})),created:function(){this.$route.params.id&&this.getinfo()},mounted:function(){this.catelist.length||this.getlist()},methods:l()({},Object(c.b)({getlist:"category/getlist"}),{handleChange:function(e,t){this.forminfo.img=e.raw},handleRemove:function(e,t){this.fileList=[],this.forminfo.img=""},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},getinfo:function(){var e=this;return n()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)(e.$route.params.id);case 2:e.forminfo=t.sent,e.forminfo.img&&(e.fileList=[{name:e.forminfo.catename,url:e.$host+e.forminfo.img}]);case 4:case"end":return t.stop()}},t,e)}))()},submit:function(){var e=this;console.log(this.forminfo);var t=new FormData;for(var i in this.forminfo)t.append(i,this.forminfo[i]);this.$refs.form.validate(function(i){i?e.$route.params.id?Object(f.c)(e.$route.params.id,t):Object(f.a)(t):e.$message.warning("验证失败")})},reset:function(){this.$route.params.id?this.getinfo():this.$refs.form.resetFields()}}),components:{}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"form-bg"},[i("el-col",{attrs:{span:10,offset:6}},[i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.forminfo,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"上级目录",prop:"pid"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.forminfo.pid,callback:function(t){e.$set(e.forminfo,"pid",t)},expression:"forminfo.pid"}},[i("el-option",{attrs:{label:"顶级目录",value:0}}),e._v(" "),e._l(e.catelist,function(e){return i("el-option",{key:e.id,attrs:{label:e.catename,value:e.id}})})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"分类名称",prop:"catename"}},[i("el-input",{model:{value:e.forminfo.catename,callback:function(t){e.$set(e.forminfo,"catename",t)},expression:"forminfo.catename"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分类图片"}},[i("el-upload",{attrs:{action:"#","auto-upload":!1,"list-type":"picture-card",limit:1,"file-list":e.fileList,"on-change":e.handleChange,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:e.forminfo.status,callback:function(t){e.$set(e.forminfo,"status",t)},expression:"forminfo.status"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即"+e._s(e.$route.params.id?"修改":"创建"))]),e._v(" "),i("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(m,u,!1,function(e){i("VHQP")},"data-v-603e1533",null);t.default=d.exports}});
//# sourceMappingURL=4.f022c1e9e03e46c28478.js.map